<!DOCTYPE html><html lang="cs"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Konvertor na GIF</title><script src="gif.js"></script><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui,-apple-system,sans-serif;background:#f9f9f9;color:#111;padding:20px;max-width:700px;margin:0 auto;line-height:1.5}h1{font-size:1.6rem;text-align:center;margin-bottom:20px}.drop-zone{border:2px dashed #aaa;padding:40px;text-align:center;border-radius:16px;background:#fff;transition:background .2s;cursor:pointer}.drop-zone.dragover{background:#eef;border-color:#4477ff}.btn{background:#3f3f3f;color:#fff;border:none;padding:.5em 1em;border-radius:12px;cursor:pointer;margin:5px;font-size:.95rem;transition:background .2s;text-decoration:none;height:auto;line-height:1.2}.btn:hover{background:#1d1d1d}.btn:disabled{background:#ccc;cursor:not-allowed}.file-input{display:none}.preview-section{margin:20px 0;display:none}.image-preview{max-width:100%;max-height:400px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.1);margin-bottom:12px}.file-info{font-size:.9rem;color:#444;margin-bottom:12px}.progress-bar{width:100%;height:6px;background:#eee;margin:15px 0;border-radius:3px;overflow:hidden;display:none}.progress-fill{height:100%;background:#111;width:0%;transition:width .3s}.status{margin:12px 0;padding:10px;border-radius:8px;font-size:.9rem;display:none}.status.success{background:#e6ffe6;border:1px solid #4caf50}.status.error{background:#ffe6e6;border:1px solid #f44336}#downloadSection{margin:20px 0;display:none;text-align:center;flex-direction:column}.fuj{visibility:none;display:none;opacity:0;z-index:-999999}</style></head><body><h1>discord generator vtipnych gifu</h1><div class="drop-zone" id="dropZone"><p>bud pretahni nebo klikni</p><p><small>podporovane jsou vsechny normalni formaty</small></p></div><input type="file" id="fileInput" class="file-input" accept="image/*"><div class="progress-bar" id="progressBar"><div class="progress-fill" id="progressFill"></div></div><div class="status" id="status"></div><div class="preview-section" id="previewSection"><div class="fuj"><img id="imagePreview" class="image-preview" alt="N치hled"><div class="file-info" id="fileInfo"></div></div><div class="actions" id="actions"><button class="btn" onclick="reset()">游댃 dalsi obrazek</button></div></div><div id="downloadSection"><a href="#" id="downloadLink" class="btn" download="">stahnout hotovej gif</a></div><script>let currentFile=null;const dropZone=document.getElementById('dropZone');const fileInput=document.getElementById('fileInput');dropZone.onclick=()=>fileInput.click();dropZone.ondragover=e=>{e.preventDefault();dropZone.classList.add('dragover')};dropZone.ondragleave=()=>dropZone.classList.remove('dragover');dropZone.ondrop=e=>{e.preventDefault();dropZone.classList.remove('dragover');handleFiles(e.dataTransfer.files)};fileInput.onchange=e=>handleFiles(e.target.files);function handleFiles(files){if(!files.length)return;const file=files[0];if(!file.type.startsWith('image/'))return showStatus('Pouze obr치zky jsou podporov치ny','error');if(file.size>50*1024*1024)return showStatus('Soubor je p콏칤li코 velk칳 (max 50MB)','error');currentFile=file;previewImage(file)}function previewImage(file){const reader=new FileReader();reader.onload=e=>{const preview=document.getElementById('imagePreview');preview.src=e.target.result;preview.onload=()=>{document.getElementById('fileInfo').innerHTML=`Soubor: ${file.name}<br>Velikost: ${formatFileSize(file.size)}<br>Rozm캩ry: ${preview.naturalWidth} 칑 ${preview.naturalHeight}px`;document.getElementById('previewSection').style.display='block';document.getElementById('downloadSection').style.display='none';hideStatus();convertToGif()}};reader.readAsDataURL(file)}async function convertToGif(){if(!currentFile)return;const img=document.getElementById('imagePreview');const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');let width=img.naturalWidth,height=img.naturalHeight;if(width>800||height>800){const ratio=Math.min(800/width,800/height);width=Math.floor(width*ratio);height=Math.floor(height*ratio)}canvas.width=width;canvas.height=height;ctx.drawImage(img,0,0,width,height);try{const gif=new GIF({workers:2,quality:10,width,height,workerScript:"./gif.worker.js"});gif.addFrame(ctx,{copy:true,delay:200});gif.on('progress',p=>updateProgress(p*100));gif.on('finished',blob=>{const link=document.getElementById('downloadLink');link.href=URL.createObjectURL(blob);link.download=currentFile.name.replace(/\.[^/.]+$/,'')+'.gif';document.getElementById('downloadSection').style.display='flex';const outImg=document.createElement('img');outImg.src=link.href;outImg.style.maxWidth="100%";outImg.style.borderRadius="12px";outImg.style.marginTop="15px";document.getElementById('downloadSection').appendChild(outImg);hideProgress()});showProgress();gif.render()}catch(e){hideProgress()}}function showProgress(){document.getElementById('progressBar').style.display='block';updateProgress(0)}function hideProgress(){document.getElementById('progressBar').style.display='none';updateProgress(0)}function updateProgress(percent){document.getElementById('progressFill').style.width=percent+'%'}function showStatus(msg,type){const st=document.getElementById('status');st.textContent=msg;st.className=`status ${type}`;st.style.display='block'}function hideStatus(){document.getElementById('status').style.display='none'}function formatFileSize(bytes){if(bytes===0)return'0 B';const k=1024;const sizes=['B','KB','MB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i))+' '+sizes[i]}function reset(){currentFile=null;document.getElementById('previewSection').style.display='none';document.getElementById('downloadSection').style.display='none';fileInput.value='';hideStatus();hideProgress()}</script></body></html>
